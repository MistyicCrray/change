(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/list"],{"1b0f":function(e,t,n){"use strict";n.r(t);var a=n("dc3f"),o=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=o.a},8155:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},"827b":function(e,t,n){},"86fa":function(e,t,n){"use strict";n.r(t);var a=n("8155"),o=n("1b0f");for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);n("df02");var i=n("2877"),u=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);t["default"]=u.exports},dc3f:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("a34a")),r=i(n("0a18"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a,o,r,i){try{var u=e[r](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(a,o)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){u(r,a,o,i,s,"next",e)}function s(e){u(r,a,o,i,s,"throw",e)}i(void 0)})}}var c=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"70dc"))},d={components:{uniLoadMore:c},data:function(){return{cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:"",priceOrder:0,cateList:[],goodsList:[],pageSize:5,pageNum:0,orderBy:"",images:r.default.imgUrl()}},onLoad:function(e){this.headerTop=document.getElementsByTagName("uni-page-head")[0].offsetHeight+"px",this.cateId=e.cateId,this.loadCateList(e.fid,e.sid),this.loadData()},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){this.loadData("refresh")},onReachBottom:function(){this.loadData()},methods:{loadCateList:function(){var t=s(o.default.mark(function t(n,i){var u;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:u=this,e.request({url:r.default.getUrl()+"category",method:"GET",success:function(e){var t=e.data.data.rows;console.info(a(t," at pages\\product\\list.vue:106"));var o=t.filter(function(e){return e.parentid==n});console.info(a(o," at pages\\product\\list.vue:108")),o.forEach(function(e){var n=t.filter(function(t){return t.parentid==e.id});e.child=n}),u.cateList=o},fail:function(e){console.info(a(e," at pages\\product\\list.vue:116"))}});case 2:case"end":return t.stop()}},t,this)}));function n(e,n){return t.apply(this,arguments)}return n}(),loadData:function(){var t=s(o.default.mark(function t(){var n,i,u,s=arguments;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:"add",i=s.length>1?s[1]:void 0,u=this,"add"!==n){t.next=10;break}if(u.pageNum++,"nomore"!==u.loadingType){t.next=7;break}return t.abrupt("return");case 7:u.loadingType="loading",t.next=11;break;case 10:u.loadingType="more";case 11:"refresh"===n&&(u.pageNum=1),e.request({url:r.default.getUrl()+"product",method:"GET",data:{size:u.pageSize,pageNum:u.pageNum,orderBy:u.orderBy,category:u.cateId},success:function(t){var a=t.data.data.rows;"refresh"===n&&(u.goodsList=[]),1===u.filterIndex&&a.sort(function(e,t){return t.sales-e.sales}),2===u.filterIndex&&a.sort(function(e,t){return 1==u.priceOrder?e.price-t.price:t.price-e.price}),u.goodsList=u.goodsList.concat(a),u.loadingType=u.goodsList.length==t.data.data.total?"nomore":"more","refresh"===n&&(1==i?e.hideLoading():e.stopPullDownRefresh())},fail:function(e){console.info(a(e," at pages\\product\\list.vue:176"))}});case 13:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),tabClick:function(t){var n=this;n.filterIndex===t&&2!==t||(n.filterIndex=t,2===t?(n.orderBy="price",n.priceOrder=1===n.priceOrder?2:1):(n.orderBy="hits",n.priceOrder=0),e.pageScrollTo({duration:300,scrollTop:0}),n.loadData("refresh",1),e.showLoading({title:"正在加载"}))},toggleCateMask:function(e){var t=this,n="show"===e?10:300,a="show"===e?1:0;this.cateMaskState=2,setTimeout(function(){t.cateMaskState=a},n)},changeCate:function(t){this.cateId=t.id,this.toggleCateMask(),e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"})},navToDetailPage:function(t){var n=t.id;e.navigateTo({url:"/pages/product/product?id=".concat(n)})},stopPrevent:function(){}}};t.default=d}).call(this,n("6e42")["default"],n("0de9")["default"])},df02:function(e,t,n){"use strict";var a=n("827b"),o=n.n(a);o.a}},[["af24","common/runtime","common/vendor"]]]);